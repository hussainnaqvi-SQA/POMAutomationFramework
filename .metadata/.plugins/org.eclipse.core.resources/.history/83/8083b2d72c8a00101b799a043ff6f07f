package com.automation.pages;

import com.automation.base.BasePage;
import com.automation.utils.LoggerUtil;
import com.aventstack.extentreports.ExtentTest;

import io.appium.java_client.AppiumDriver;

import org.openqa.selenium.By;
import org.slf4j.Logger;

public class LoginPage extends BasePage {
	 private AppiumDriver driver;

	    
    private static final Logger log = LoggerUtil.getLogger(LoginPage.class);

    // XPaths (or IDs if you prefer)
    private final By usernameField = By.xpath("//android.widget.ScrollView/android.widget.EditText[1]");
    private final By passwordField = By.xpath("//android.widget.ScrollView/android.widget.EditText[2]");
    private final By loginBtn = By.xpath("//android.widget.Button[@content-desc=\"Log In\"]");
    private final By loginSuccessCheck = By.xpath("//android.view.View[@content-desc=\"Two Step Authentication\"]");
    private final By loginswitch = By.xpath("//android.widget.ImageView[@content-desc=\"Sign In With Phone Number\"]");
    private final By EmailValidation = By.xpath("//android.view.View[@content-desc=\"Please enter an email address\"]");

    public void enterEmail(String email, ExtentTest extentTest) {
        LoggerUtil.logInfo(log, "Entering email: " + email);
        click(usernameField, extentTest); // click to focus
        type(usernameField, email, extentTest);
    }
    public void enterPhone(String phone, ExtentTest extentTest) {
        LoggerUtil.logInfo(log, "Entering phone no.: " + phone);
        click(usernameField, extentTest); // click to focus
        type(usernameField, phone, extentTest);
    }

    public void enterPassword(String password, ExtentTest extentTest) {
        LoggerUtil.logInfo(log, "Entering password." + password);
        click(passwordField, extentTest); // click to focus
        type(passwordField, password, extentTest);
    }

    public void tapLogin(ExtentTest extentTest) {
        LoggerUtil.logInfo(log, "Clicking Login button.");
        click(loginBtn, extentTest);
    }

    public boolean isLoginButtonVisible(ExtentTest extentTest) {
        LoggerUtil.logInfo(log, "Checking if Login button is visible.");
        return isDisplayed(loginBtn, extentTest);
    }

    public void loginWithEmail(String email, String password, ExtentTest extentTest) {
        LoggerUtil.logInfo(log, "Performing login with email: " + email);
        enterEmail(email, extentTest);
        enterPassword(password, extentTest);
        tapLogin(extentTest);
    }
    public void loginWithPhone(String phone, String password, ExtentTest extentTest) {
        LoggerUtil.logInfo(log, "Performing login with phone number: " + phone);
        enterPhone(phone, extentTest);
        enterPassword(password, extentTest);
        tapLogin(extentTest);
    }
    
    public boolean loginValidCheck(By CheckString, String expectedText, ExtentTest extentTest) {
        return validateText(CheckString, expectedText, extentTest, "Login Check");
    }

    public void switchLoginMode(ExtentTest extentTest) {
    	LoggerUtil.logInfo(log, "Switching Login Mode.");
    	click( loginswitch, extentTest);
    }
}
